<div class="app-shell">
    <header class="app-header">
        <div class="brand">Budget Tracker Lite</div>

        <button (click)="toggleMobileNav()" [attr.aria-expanded]="mobileNavOpen" [class.open]="mobileNavOpen"
                aria-label="Toggle navigation"
                class="hamburger" type="button">
      <span class="hamburger-box">
        <span class="hamburger-inner"></span>
      </span>
        </button>

        <ng-container *ngIf="isDevBypass$ || (isAuthenticated$ | async); else authLinks">
            <div class="nav-actions">

                <nav [class.open]="mobileNavOpen" class="nav-links">
                    <a (click)="closeMobileNav()" routerLink="/transactions" routerLinkActive="active">Transactions</a>
                    <a (click)="closeMobileNav()" routerLink="/categories" routerLinkActive="active">Categories</a>
                    <a (click)="closeMobileNav()" routerLink="/beneficiaries"
                       routerLinkActive="active">Beneficiaries</a>
                    <a (click)="closeMobileNav()" routerLink="/gifts" routerLinkActive="active">Gifts</a>
                    <a (click)="closeMobileNav()" routerLink="/reports" routerLinkActive="active">Reports</a>
                    <a (click)="closeMobileNav()" routerLink="/users" routerLinkActive="active">Users</a>

                    <!-- Mobile-only logout inside menu -->
                    <button (click)="logout(); closeMobileNav()" aria-label="Logout" class="mobile-logout"
                            type="button">Logout
                    </button>
                </nav>

                <div class="user-area">
                    <span *ngIf="currentUser$ | async as user" class="welcome">Welcome, {{ user.name }}</span>
                    <button (click)="logout()" class="logout-btn" type="button"><span
                            class="logout-text">Logout</span><span class="logout-icon">ðŸ”’</span></button>
                </div>
            </div>
        </ng-container>

        <ng-template #authLinks>
            <div [class.open]="mobileNavOpen" class="nav-links">
                <a (click)="closeMobileNav()" routerLink="/login" routerLinkActive="active">Login</a>
                <a (click)="closeMobileNav()" routerLink="/register" routerLinkActive="active">Register</a>
            </div>
        </ng-template>
    </header>
    <router-outlet></router-outlet>

    <button (click)="scrollToTop()" *ngIf="showScrollTop" aria-label="Scroll to top" class="scroll-to-top">â–²</button>
</div>

